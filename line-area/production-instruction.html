<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>コンクリートオーダーシステム - ラインエリア - 生産指示</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/production-instruction.css">
    <link rel="stylesheet" href="css/modals.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 生産指示画面 -->
        <div id="production-instruction-screen" class="screen active">
            <div class="header">
                <div class="header-left">
                    <select class="screen-selector">
                        <option value="production-instruction" selected>注文</option>
                        <option value="batch-info">バッチ情報</option>
                    </select>
                    <span class="date-info"></span>
                    <select id="production-instruction-line-selector" class="line-selector">
                        <option value="栃木_建築A北">栃木_建築A北</option>
                        <option value="栃木_建築B北">栃木_建築B北</option>
                        <option value="茨城_Aライン">茨城_Aライン</option>
                        <option value="茨城_B1ライン">茨城_B1ライン</option>
                    </select>
                </div>
                <div class="header-right">
                    <button class="qr-btn">QR読取</button>
                    <select class="filter-selector">
                        <option value="all">全ての製品を表示</option>
                        <option value="incomplete">打設未完了製品</option>
                        <option value="completed">打設完了済製品</option>
                    </select>
                    <button class="logout-btn">ログアウト</button>
                </div>
            </div>

            <!-- グリッドレイアウト -->
            <div class="production-instruction-grid">
                <!-- 製造予定エリア -->
                <div class="area production-schedule-area">
                    <div class="area-header production-schedule-header">製造予定</div>
                    <div class="schedule-content">
                        <div class="schedule-header">
                            <div class="date-label">日付</div>
                            <div class="date-cells">
                                <div class="date-column" id="production-today-date"></div>
                                <div class="date-column" id="production-tomorrow-date"></div>
                            </div>
                        </div>
                        
                        <div class="schedule-body">
                            
                            <!-- プロジェクトセクション（JavaScriptで動的生成） -->
                            <div id="line-project-sections-container">
                                <!-- プロジェクトセクションはJavaScriptで動的に生成されます -->
                            </div>
                        </div>
                    </div>
                    <div class="selection-form">
                        <button class="clear-selection-btn" style="display: none;">選択解除</button>
                    </div>
                </div>

                <!-- 注文明細エリア -->
                <div class="area order-details-area">
                    <div class="area-header order-details-header">注文明細</div>
                    <div class="order-details-table-container">
                        <table class="order-details-table">
                            <thead>
                                <tr>
                                    <th>注文時刻</th>
                                    <th>物件略称</th>
                                    <th>製品番号</th>
                                    <th>強度</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- データはJavaScriptで動的に生成されます -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- CON注文選択製品エリア -->
                <div class="area selected-products-area">
                    <div class="selected-products-area-content">
                        <div class="area-header selected-products-header">CON注文選択製品</div>
                        <div class="selected-products-content">
                            <div class="selected-product-input">
                                <div class="strength-display-row">
                                    <span id="selected-strength">11.2</span>
                                    <span class="unit-symbol">㎥</span>
                                    <span id="selected-mixing-no" class="mixing-no-display"></span>
                                </div>
                                <select id="selected-unit-display" disabled>
                                    <option value="">選択してください</option>
                                </select>
                            </div>
                            <div class="selected-products-list" id="selected-products-list">
                                <!-- 選択された製品が表示されます -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 注文内容入力エリア -->
                <div class="area order-input-area">
                    <div class="area-header order-input-header">注文内容詳細</div>
                    <div class="order-details-content">
                        <div class="design-info-section">
                            <div class="detail-row">
                                <label>設計数量</label>
                                <div class="detail-value">
                                    <div class="strength-display-row">
                                        <span></span>
                                    </div>
                                    <div class="unit-display-row">
                                        <span></span>
                                        <span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="order-info-section">
                            <div class="change-fields">
                                <div class="change-field">
                                    <label>注文数量</label>
                                    <span></span>
                                </div>
                                <div class="change-field">
                                    <label>変更1</label>
                                    <span></span>
                                </div>
                                <div class="change-field">
                                    <label>変更2</label>
                                    <span></span>
                                </div>
                                <div class="change-field">
                                    <label>変更3</label>
                                    <span></span>
                                </div>
                                <div class="change-field">
                                    <label>変更4</label>
                                    <span></span>
                                </div>
                                <div class="change-field">
                                    <label>変更5</label>
                                    <span></span>
                                </div>
                            </div>
                        </div>
                        <div class="batch-select-section">
                            <div class="batch-division-radio">
                                <div class="batch-select-section-radio-label">
                                    <label>バッチ割</label>
                                </div>
                                <div class="batch-select-section-radio-buttons">
                                    <span id="batch-division-display"></span>
                                </div>
                            </div>
                        </div>
                        <div class="batch-info-section">
                            <table class="batch-info-table">
                                <thead>
                                    <tr>
                                        <th>バッチ No.</th>
                                        <th>m3数</th>
                                        <th>ステータス</th>
                                    </tr>
                                </thead>
                            </table>
                            <div class="batch-info-table-wrapper">
                                <table class="batch-info-table">
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>1.3</td>
                                        <td class="status-shipped">出荷済</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>1.3</td>
                                        <td class="status-shipped">出荷済</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>1.3</td>
                                        <td class="status-shipped">出荷済</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>1.3</td>
                                        <td class="status-mixing">練混中</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>9</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>11</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>12</td>
                                        <td>1.3</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                    <tr>
                                        <td>13</td>
                                        <td>1.1</td>
                                        <td class="status-requested">依頼中</td>
                                    </tr>
                                </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ライン当日予定数量エリア -->
                <div class="area line-daily-quantity-area">
                    <div class="area-header line-daily-quantity-header">ライン当日予定数量</div>
                    <div class="daily-quantity-content">
                        <table class="quantity-table">
                            <tr>
                                <td>予定設計m3数</td>
                                <td>33.70</td>
                            </tr>
                            <tr>
                                <td>注文設計m3数</td>
                                <td>16.70</td>
                            </tr>
                            <tr>
                                <td>打設残m3数</td>
                                <td>20.30</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- アクションボタンエリア -->
                <div class="area action-buttons-area">
                    <button class="area-btn buttons-area-btn order-quantity-btn">注文</button>
                    <button class="area-btn buttons-area-btn change-order-quantity-btn">注文数量変更</button>
                    <button class="area-btn buttons-area-btn stop-shipment-btn">次バッチ 出荷停止</button>
                    <button class="area-btn buttons-area-btn start-shipment-btn">次バッチ 出荷開始</button>
                    <button class="area-btn buttons-area-btn completion-btn">打設完了</button>
                </div>
            </div>
        </div>

        <!-- 数量変更依頼モーダル -->
        <div id="change-request-modal" class="change-request-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>数量変更依頼</h3>
                </div>
                <div class="change-info">
                    <div class="change-target">○○駅西口再開発 36N</div>
                    <div class="quantity-change-container">
                        <div class="quantity-change">
                            <label class="before-change-label">変更前の量</label>
                            <span>1.00m³</span>
                        </div>
                        <div class="arrow">→</div>
                        <div class="quantity-change">
                            <label>変更後の量</label>
                            <div class="input-with-unit">
                                <input type="text" placeholder="0.00">
                                <span class="unit">m³</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-cancel-btn change-request-cancel-btn">キャンセル</button>
                    <button class="modal-ok-btn modal-change-request-btn">変更依頼</button>
                </div>
            </div>
        </div>

        <!-- 注文数量入力モーダル -->
        <div id="quantity-input-modal" class="quantity-input-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>注文数量入力</h3>
                </div>
                
                <div class="quantity-input-content">
                    <div class="quantity-input-panel">
                        <div class="project-info-header">
                            <span class="project-info-name">○○駅西口再開発</span>
                            <span class="concrete-info">36N 1.348㎥</span>
                        </div>
                        
                        <div class="total-quantity-container">
                            <div class="total-quantity">
                                <label>総量 <span class="required">*</span></label>
                                <input type="text" id="total-quantity-input" placeholder="注文する総量">
                            </div>
                            <div class="batch-options-container">
                                <div class="batch-division-radio">
                                    <label class="radio-label">
                                        <label>バッチ割</label>
                                        <input type="radio" name="batch-division" value="auto" id="batch-division-auto" checked>
                                        <span class="radio-text">おまかせ</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="batch-division" value="manual" id="batch-division-manual">
                                        <span class="radio-text">指定</span>
                                    </label>
                                </div>
                                <div class="batch-interval-radio">
                                    <label class="radio-label">
                                        <label>バッチ間隔</label>
                                        <input type="radio" name="batch-interval" value="auto" id="batch-interval-auto" checked>
                                        <span class="radio-text">おまかせ</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="batch-interval" value="specify" id="batch-interval-specify">
                                        <span class="radio-text">指定</span>
                                        <div class="batch-interval-input-container" id="batch-interval-input-container" style="display: none;">
                                            <input type="text" id="batch-interval-input" value="10">
                                            <span class="batch-interval-unit">分</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="batch-division-container">
                            <div class="batch-inputs">
                                <div class="batch-section-header">バッチ割</div>
                                <div class="batch-input-container" id="batch-inputs-section">
                                    <div class="batch-mode-selection">
                                        <label class="radio-label">
                                            <input type="radio" name="batch-mode" value="auto" id="batch-mode-auto" checked>
                                            <span class="radio-text">自動分割</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="batch-mode" value="manual" id="batch-mode-manual">
                                            <span class="radio-text">手動入力</span>
                                        </label>
                                    </div>
                                    <div class="batch-size-input-container">
                                        <label>1バッチ量</label>
                                        <input type="text" id="batch-size-input" placeholder="1バッチ量">
                                        <button class="batch-add-btn" id="batch-add-btn">追加</button>
                                    </div>
                                    <div class="remaining-quantity">
                                        <label>残り</label>
                                        <span id="remaining-quantity-display">-</span>
                                    </div>
                                    <div class="batch-table-container">
                                        <table class="batch-table" id="batch-table">
                                            <thead>
                                                <tr>
                                                    <th>バッチNo</th>
                                                    <th>㎥数</th>
                                                    <th>削除</th>
                                                </tr>
                                            </thead>
                                            <tbody id="batch-table-body">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="memo-input">
                                <label>メモ</label>
                                <textarea id="memo-textarea" placeholder="メモ"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-cancel-btn quantity-input-cancel-btn">キャンセル</button>
                    <button class="modal-ok-btn order-btn">注文</button>
                </div>
            </div>
        </div>

        <!-- 打設完了確認モーダル -->
        <div id="completion-modal" class="completion-modal">
            <div class="modal-content">
                <div class="modal-header">
                <h3>打設完了確認</h3>
                </div>
                
                <div class="completion-info">
                    <div class="info-item">
                        <label>型枠番号:</label>
                        <span>No.03</span>
                    </div>
                    <div class="info-item">
                        <label>工事名:</label>
                        <span>○○駅西口再開発</span>
                    </div>
                    <div class="info-item">
                        <label>階数:</label>
                        <span>20F</span>
                    </div>
                    <div class="info-item">
                        <label>製品番号:</label>
                        <span>20C-Xa1Ya1</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-cancel-btn">キャンセル</button>
                    <button class="modal-ok-btn">打設完了</button>
                </div>
            </div>
        </div>
    </div>

    <!-- データファイル -->
    <script src="../js/data/shared-schedule-data.js"></script>
    <script src="../js/data/batch-confirmation-data.js"></script>
    <script src="../js/data/line-order-details-data.js"></script>

    <!-- ラインエリア機能別JavaScriptファイル -->
    <script src="../js/line-area/screen-navigation.js"></script>
    <script src="../js/line-area/modal-handler.js"></script>
    <script src="../js/line-area/production-instruction.js"></script>
    
    <!-- メインファイル -->
    <script src="line-area.js"></script>
</body>
</html>

